{"version":3,"file":"components.js","sources":["../../../src/vendor/components.ts"],"sourcesContent":["import type { ViewModel } from '../types';\n\n// Vendored from https://github.com/vuejs/vue/blob/612fb89547711cacb030a3893a0065b785802860/src/core/util/debug.js\n// with types only changes.\n\n// The MIT License (MIT)\n\n// Copyright (c) 2013-present, Yuxi (Evan) You\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nconst classifyRE = /(?:^|[-_])(\\w)/g;\nconst classify = (str: string): string => str.replace(classifyRE, c => c.toUpperCase()).replace(/[-_]/g, '');\n\nconst ROOT_COMPONENT_NAME = '<Root>';\nconst ANONYMOUS_COMPONENT_NAME = '<Anonymous>';\n\nconst repeat = (str: string, n: number): string => {\n  // string.repeat() is not supported by IE11, we fall back to just using the string in that case\n  // eslint-disable-next-line @sentry-internal/sdk/no-unsupported-es6-methods\n  return str.repeat ? str.repeat(n) : str;\n};\n\nexport const formatComponentName = (vm?: ViewModel, includeFile?: boolean): string => {\n  if (!vm) {\n    return ANONYMOUS_COMPONENT_NAME;\n  }\n\n  if (vm.$root === vm) {\n    return ROOT_COMPONENT_NAME;\n  }\n\n  // https://github.com/getsentry/sentry-javascript/issues/5204 $options can be undefined\n  if (!vm.$options) {\n    return ANONYMOUS_COMPONENT_NAME;\n  }\n\n  const options = vm.$options;\n\n  let name = options.name || options._componentTag;\n  const file = options.__file;\n  if (!name && file) {\n    const match = file.match(/([^/\\\\]+)\\.vue$/);\n    if (match) {\n      name = match[1];\n    }\n  }\n\n  return (\n    (name ? `<${classify(name)}>` : ANONYMOUS_COMPONENT_NAME) + (file && includeFile !== false ? ` at ${file}` : '')\n  );\n};\n\nexport const generateComponentTrace = (vm?: ViewModel): string => {\n  if (vm && (vm._isVue || vm.__isVue) && vm.$parent) {\n    const tree = [];\n    let currentRecursiveSequence = 0;\n    while (vm) {\n      if (tree.length > 0) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const last = tree[tree.length - 1] as any;\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        if (last.constructor === vm.constructor) {\n          currentRecursiveSequence++;\n          vm = vm.$parent; // eslint-disable-line no-param-reassign\n          continue;\n        } else if (currentRecursiveSequence > 0) {\n          tree[tree.length - 1] = [last, currentRecursiveSequence];\n          currentRecursiveSequence = 0;\n        }\n      }\n      tree.push(vm);\n      vm = vm.$parent; // eslint-disable-line no-param-reassign\n    }\n\n    const formattedTree = tree\n      .map(\n        (vm, i) =>\n          `${\n            (i === 0 ? '---> ' : repeat(' ', 5 + i * 2)) +\n            (Array.isArray(vm)\n              ? `${formatComponentName(vm[0])}... (${vm[1]} recursive calls)`\n              : formatComponentName(vm))\n          }`,\n      )\n      .join('\\n');\n\n    return `\\n\\nfound in\\n\\n${formattedTree}`;\n  }\n\n  return `\\n\\n(found in ${formatComponentName(vm)})`;\n};\n"],"names":[],"mappings":"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"}