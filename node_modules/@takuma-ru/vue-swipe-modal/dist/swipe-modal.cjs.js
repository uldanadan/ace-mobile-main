(function(){ try {var elementStyle = document.createElement('style'); elementStyle.appendChild(document.createTextNode(".swipe-modal-takumaru-vue-swipe-modal{position:fixed;scrollbar-width:none;z-index:15}.swipe-modal-takumaru-vue-swipe-modal .modal-background{position:fixed;z-index:11;width:100vw;height:100vh;top:50%;left:50%;transform:translate(-50%,-50%)}.swipe-modal-takumaru-vue-swipe-modal .modal-contents{position:fixed;z-index:12;max-height:100vh;left:50%;transform:translate(-50%) translateY(0);overflow-y:scroll;-ms-overflow-style:none;scrollbar-width:none;backface-visibility:hidden;-webkit-backface-visibility:hidden;filter:drop-shadow(0px 16px 40px rgba(0,37,80,.2))}.swipe-modal-takumaru-vue-swipe-modal .modal-contents::-webkit-scrollbar{width:0px}.swipe-modal-takumaru-vue-swipe-modal .modal-contents-chip-wrapper{z-index:12;display:flex;justify-items:center;align-items:center;justify-content:center;align-content:center;position:relative;top:0px;height:4px;width:100%;padding-top:8px;padding-bottom:8px;cursor:s-resize}.swipe-modal-takumaru-vue-swipe-modal .modal-contents-chip{--tip-color: #c8c8c8;width:40px;height:100%;border-radius:4px;background-color:var(--tip-color)}")); document.head.appendChild(elementStyle);} catch(e) {console.error('vite-plugin-css-injected-by-js', e);} })();"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var o=require("vue-demi"),Y;const S=typeof window!="undefined",G=e=>typeof e!="undefined",q=e=>typeof e=="function",k=e=>typeof e=="number",j=(e,n,l)=>Math.min(l,Math.max(n,e)),$=()=>{};S&&((Y=window==null?void 0:window.navigator)==null?void 0:Y.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function K(e){return e}function F(e){return o.getCurrentScope()?(o.onScopeDispose(e),!0):!1}function J(e,n=!0){o.getCurrentInstance()?o.onMounted(e):n?e():o.nextTick(e)}function Q(e,n,l={}){const{immediate:v=!0}=l,i=o.ref(!1);let u=null;function d(){u&&(clearTimeout(u),u=null)}function c(){i.value=!1,d()}function r(...f){d(),i.value=!0,u=setTimeout(()=>{i.value=!1,u=null,e(...f)},o.unref(n))}return v&&(i.value=!0,S&&r()),F(c),{isPending:i,start:r,stop:c}}function Z(e){var n;const l=o.unref(e);return(n=l==null?void 0:l.$el)!=null?n:l}const A=S?window:void 0;S&&window.document;S&&window.navigator;S&&window.location;const H=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},I="__vueuse_ssr_handlers__";H[I]=H[I]||{};H[I];function z(e,n,{window:l=A,initialValue:v=""}={}){const i=o.ref(v),u=o.computed(()=>{var d;return Z(n)||((d=l==null?void 0:l.document)==null?void 0:d.documentElement)});return o.watch([u,()=>o.unref(e)],([d,c])=>{var r;if(d&&l){const f=(r=l.getComputedStyle(d).getPropertyValue(c))==null?void 0:r.trim();i.value=f||v}},{immediate:!0}),o.watch(i,d=>{var c;(c=u.value)!=null&&c.style&&u.value.style.setProperty(o.unref(e),d)}),i}function ee(e,n={}){const{immediate:l=!0,window:v=A}=n,i=o.ref(!1);let u=null;function d(){!i.value||!v||(e(),u=v.requestAnimationFrame(d))}function c(){!i.value&&v&&(i.value=!0,d())}function r(){i.value=!1,u!=null&&v&&(v.cancelAnimationFrame(u),u=null)}return l&&c(),F(r),{isActive:i,pause:r,resume:c}}var B;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(B||(B={}));function te([e,n,l,v]){const i=(a,s)=>1-3*s+3*a,u=(a,s)=>3*s-6*a,d=a=>3*a,c=(a,s,m)=>((i(s,m)*a+u(s,m))*a+d(s))*a,r=(a,s,m)=>3*i(s,m)*a*a+2*u(s,m)*a+d(s),f=a=>{let s=a;for(let m=0;m<4;++m){const t=r(s,e,l);if(t===0)return s;s-=(c(s,e,l)-a)/t}return s};return a=>e===n&&l===v?a:c(f(a),n,v)}function W(e,n={}){const{delay:l=0,disabled:v=!1,duration:i=1e3,onFinished:u=$,onStarted:d=$,transition:c=K}=n,r=o.computed(()=>{const p=o.unref(c);return q(p)?p:te(p)}),f=o.computed(()=>{const p=o.unref(e);return k(p)?p:p.map(o.unref)}),a=o.computed(()=>k(f.value)?[f.value]:f.value),s=o.ref(a.value.slice(0));let m,t,g,w,T;const{resume:h,pause:b}=ee(()=>{const p=Date.now(),D=j(1-(g-p)/m,0,1);s.value=T.map((M,y)=>{var E;return M+((E=t[y])!=null?E:0)*r.value(D)}),D>=1&&(b(),u())},{immediate:!1}),_=()=>{b(),m=o.unref(i),t=s.value.map((p,D)=>{var M,y;return((M=a.value[D])!=null?M:0)-((y=s.value[D])!=null?y:0)}),T=s.value.slice(0),w=Date.now(),g=w+m,h(),d()},R=Q(_,l,{immediate:!1});return o.watch(a,()=>{o.unref(v)?s.value=a.value.slice(0):o.unref(l)<=0?_():R.start()},{deep:!0}),o.computed(()=>{const p=o.unref(v)?a:s;return k(f.value)?p.value[0]:p.value})}function oe(e,n,l,v={}){var i,u,d,c,r;const{passive:f=!1,eventName:a,deep:s=!1,defaultValue:m}=v,t=o.getCurrentInstance(),g=l||(t==null?void 0:t.emit)||((i=t==null?void 0:t.$emit)==null?void 0:i.bind(t))||((d=(u=t==null?void 0:t.proxy)==null?void 0:u.$emit)==null?void 0:d.bind(t==null?void 0:t.proxy));let w=a;if(!n)if(o.isVue2){const h=(r=(c=t==null?void 0:t.proxy)==null?void 0:c.$options)==null?void 0:r.model;n=(h==null?void 0:h.value)||"value",a||(w=(h==null?void 0:h.event)||"input")}else n="modelValue";w=a||w||`update:${n.toString()}`;const T=()=>G(e[n])?e[n]:m;if(f){const h=o.ref(T());return o.watch(()=>e[n],b=>h.value=b),o.watch(h,b=>{(b!==e[n]||s)&&g(w,b)},{deep:s}),h}else return o.computed({get(){return T()},set(h){g(w,h)}})}const ne=()=>{const e=o.ref({isTouch:!1,touchStart:0,touchDistance:0,touchX:0,touchY:0});return{touchPosition:e,initTouchPosition:()=>{e.value={isTouch:!1,touchStart:0,touchDistance:0,touchX:0,touchY:0}},touchStart:u=>{e.value.isTouch=!0,e.value.touchStart=u.touches[0].pageY},touchMove:u=>{e.value.isTouch&&(e.value.touchY=u.touches[0].pageY,e.value.touchDistance=e.value.touchStart-e.value.touchY,e.value.touchDistance>0&&(e.value.touchDistance=0))},touchEnd:()=>{e.value.isTouch=!1}}};function ue(){const e=o.ref({isMouseDown:!1,downStart:0,mouseDistance:0,mouseX:0,mouseY:0});return{mousePosition:e,initMousePosition:()=>{e.value={isMouseDown:!1,downStart:0,mouseDistance:0,mouseX:0,mouseY:0}},mouseDown:u=>{e.value.isMouseDown=!0,e.value.downStart=u.pageY},mouseMove:u=>{e.value.isMouseDown&&(e.value.mouseY=u.pageY,e.value.mouseDistance=e.value.downStart-e.value.mouseY,e.value.mouseDistance>0&&(e.value.mouseDistance=0))},mouseUp:()=>{e.value.isMouseDown=!1}}}const P=(e,n)=>{const l=e.indexOf("px"),v=e.indexOf("vh"),i=e.indexOf("vw"),u=e.indexOf("vmin"),d=e.indexOf("vmax"),c=e.indexOf("%");if(l>0)return Number(e.slice(0,l));if(v>0){const r=Number(e.slice(0,v));return window.innerHeight*(r/100)}else if(i>0){const r=Number(e.slice(0,i));return window.innerWidth*(r/100)}else if(u>0){const r=Number(e.slice(0,u));return window.innerWidth<window.innerHeight?window.innerWidth:window.innerHeight*(r/100)}else if(d>0){const r=Number(e.slice(0,d));return window.innerWidth<window.innerHeight?window.innerHeight:window.innerWidth*(r/100)}else if(c>0){let r=0;return J(()=>{var s,m;const f=((m=(s=n==null?void 0:n.value)==null?void 0:s.parentElement)==null?void 0:m.clientHeight)||document.documentElement.clientHeight,a=Number(e.slice(0,c));r=f*(a/100)}),r||document.documentElement.clientHeight}else return 0};o.install();var X=o.defineComponent({name:"swipeModal",model:{prop:"modelValue",event:"update:modelValue"},props:{modelValue:{type:Boolean,default:!1},dark:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1},backgroundColor:{type:String,default:"#80808080"},fullscreen:{type:Boolean,default:!1},noTip:{type:Boolean,default:!1},contentsWidth:{type:String,default:"100%"},contentsHeight:{type:String,default:"30vh"},borderTopRadius:{type:String,default:null},borderTopLeftRadius:{type:String,default:"0px"},borderTopRightRadius:{type:String,default:"0px"},contentsColor:{type:String,default:"white"},tipColor:{type:String,default:"#c8c8c8"},darkContentsColor:{type:String,default:"#1E1E1E"}},emits:["update:modelValue","open","close"],setup(e,n){const{mousePosition:l,initMousePosition:v,mouseDown:i,mouseMove:u,mouseUp:d}=ue(),{touchPosition:c,initTouchPosition:r,touchStart:f,touchMove:a,touchEnd:s}=ne(),m=oe(e,"modelValue",n.emit),t=o.toRefs(e),g=o.ref(),w=o.ref(280),T=o.ref(null),h=z("--tip-color",T);h.value=t.tipColor.value;const b=o.ref([parseInt(t.backgroundColor.value.slice(1,3),16),parseInt(t.backgroundColor.value.slice(3,5),16),parseInt(t.backgroundColor.value.slice(5,7),16),0]),_=W(b,{duration:250,transition:[.25,.8,.25,1]}),R=o.computed(()=>{const[x,V,U,L]=_.value;return`rgba(${x}, ${V}, ${U}, ${L})`}),p=o.ref(-1*P(t.contentsHeight.value,g)),D=W(p,{duration:w.value,transition:[.25,.8,.25,1]}),M=o.computed(()=>D.value+(Math.abs(c.value.touchDistance)>Math.abs(l.value.mouseDistance)?c.value.touchDistance:l.value.mouseDistance)),y=()=>{document.documentElement.style.overflowY="auto",m.value=!1},E=()=>{n.emit("open"),document.documentElement.style.overflowY="hidden",p.value=0,b.value=[parseInt(t.backgroundColor.value.slice(1,3),16),parseInt(t.backgroundColor.value.slice(3,5),16),parseInt(t.backgroundColor.value.slice(5,7),16),parseInt(t.backgroundColor.value.slice(7,9),16)/255]},C=()=>{p.value=-1*P(t.contentsHeight.value,g)-(Math.abs(c.value.touchDistance)>Math.abs(l.value.mouseDistance)?c.value.touchDistance:l.value.mouseDistance),b.value=[parseInt(t.backgroundColor.value.slice(1,3),16),parseInt(t.backgroundColor.value.slice(3,5),16),parseInt(t.backgroundColor.value.slice(5,7),16),0],setTimeout(()=>{v(),r(),y(),n.emit("close")},w.value)},N=()=>{s(),-1*c.value.touchDistance>P(t.contentsHeight.value,g)/8?C():c.value.touchDistance=0},O=()=>{d(),-1*l.value.mouseDistance>P(t.contentsHeight.value,g)/8?C():l.value.mouseDistance=0};return o.watch(m,(x,V)=>{m.value&&E()}),()=>{var x,V;return o.h("div",{class:"swipe-modal-takumaru-vue-swipe-modal",on:{mousemove:u,mouseup:O},onMousemove:u,onMouseup:O},[t.modelValue.value?o.h("div",{class:"modal-background",style:{backgroundColor:R.value},on:{onMouseup:()=>t.persistent.value?()=>null:C(),click:()=>t.persistent.value?()=>null:C()},onMouseup:()=>{t.persistent.value||C()},onClick:()=>{t.persistent.value||C()}}):null,t.modelValue.value?o.h("div",{ref:g,class:"modal-contents",style:{width:t.contentsWidth.value,minHeight:t.contentsHeight.value,borderTopLeftRadius:t.borderTopRadius.value?t.borderTopRadius.value:t.borderTopLeftRadius.value,borderTopRightRadius:t.borderTopRadius?t.borderTopRadius.value:t.borderTopRightRadius.value,backgroundColor:t.dark.value?t.darkContentsColor.value:t.contentsColor.value,color:t.dark.value?"white":"black",bottom:`${M.value}px`},on:{touchstart:f,touchmove:a,touchend:N},onTouchstart:f,onTouchmove:a,onTouchend:N},[t.noTip.value?null:o.h("div",{class:"modal-contents-chip-wrapper",on:{mousedown:i},onMousedown:i},[o.h("div",{class:"modal-contents-chip"})]),(V=(x=n.slots).default)==null?void 0:V.call(x)]):null])}}});exports.default=X;exports.swipeModal=X;
