{"version":3,"sources":["../src/SvgIcon.tsx"],"sourcesContent":["import React from 'react';\nimport { BrowserSymbol } from './browser-symbol';\nimport { IconSettingsInterface, IconSettingsContext } from './IconSettings';\nimport { addSpriteSymbol, useIsomorphicLayoutEffect } from './sprite';\nimport { warnOnce } from './warnOnce';\n\nexport interface SvgIconProps extends React.SVGProps<SVGSVGElement> {\n  width?: number;\n  height?: number;\n  getRootRef?: React.Ref<SVGSVGElement>;\n  title?: string;\n}\n\nfunction iconClass(fragments: string[], { classPrefix, globalClasses }: IconSettingsInterface) {\n  let res = '';\n  for (let i = 0; i < fragments.length; i++) {\n    if (classPrefix) {\n      res += ' ' + (classPrefix + fragments[i]);\n    }\n    if (!classPrefix || globalClasses) {\n      res += ' ' + fragments[i];\n    }\n  }\n  return res;\n}\n\nconst SvgIcon = ({\n  width = 0,\n  height = 0,\n  viewBox,\n  id,\n  className = '',\n  fill,\n  getRootRef,\n  style: propsStyle = {},\n  title,\n  children,\n  ...restProps\n}: SvgIconProps) => {\n  const size = Math.max(width, height);\n\n  const iconSettings = React.useContext(IconSettingsContext);\n  const ownClass = iconClass(\n    ['Icon', `Icon--${size}`, `Icon--w-${width}`, `Icon--h-${height}`, `Icon--${id}`],\n    iconSettings,\n  );\n\n  const style = {\n    width,\n    height,\n    ...propsStyle,\n  };\n\n  return (\n    <svg\n      aria-hidden=\"true\"\n      display=\"block\"\n      {...restProps}\n      className={`${ownClass} ${className}`}\n      viewBox={viewBox}\n      width={width}\n      height={height}\n      style={style}\n      ref={getRootRef}\n    >\n      {title && <title>{title}</title>}\n      <use xlinkHref={`#${id}`} style={{ fill: 'currentColor', color: fill }}>\n        {children}\n      </use>\n    </svg>\n  );\n};\n\nexport function makeIcon<Props extends SvgIconProps = SvgIconProps>(\n  componentName: string,\n  id: string,\n  viewBox: string,\n  content: string,\n  width: number,\n  height: number,\n  deprecated?: boolean,\n  replacement?: string,\n): React.FC<Props> {\n  let isMounted = false;\n  function mountIcon() {\n    if (!isMounted) {\n      addSpriteSymbol(new BrowserSymbol({ content }));\n      isMounted = true;\n    }\n  }\n\n  const warn = warnOnce(componentName);\n  const Icon = (props: Props) => {\n    useIsomorphicLayoutEffect(mountIcon, []);\n\n    if (deprecated) {\n      const replacementNotice = replacement ? `. Замените на ${replacement}` : '';\n\n      warn('Иконка устарела' + replacementNotice);\n    }\n\n    return (\n      <SvgIcon\n        {...props}\n        viewBox={viewBox}\n        id={id}\n        width={props.width !== undefined && !isNaN(props.width) ? +props.width : width}\n        height={props.height !== undefined && !isNaN(props.height) ? +props.height : height}\n      />\n    );\n  };\n\n  (Icon as any).mountIcon = mountIcon;\n  Icon.displayName = componentName;\n\n  return Icon;\n}\n"],"names":["React","BrowserSymbol","IconSettingsContext","addSpriteSymbol","useIsomorphicLayoutEffect","warnOnce","iconClass","fragments","classPrefix","globalClasses","res","i","length","SvgIcon","width","height","viewBox","id","className","fill","getRootRef","propsStyle","style","title","children","restProps","size","Math","max","iconSettings","useContext","ownClass","svg","aria-hidden","display","ref","use","xlinkHref","color","makeIcon","componentName","content","deprecated","replacement","mountIcon","isMounted","warn","Icon","props","replacementNotice","undefined","isNaN","displayName"],"mappings":";;;AAAA,OAAOA,WAAW,QAAQ;AAC1B,SAASC,aAAa,QAAQ,mBAAmB;AACjD,SAAgCC,mBAAmB,QAAQ,iBAAiB;AAC5E,SAASC,eAAe,EAAEC,yBAAyB,QAAQ,WAAW;AACtE,SAASC,QAAQ,QAAQ,aAAa;AAStC,SAASC,UAAUC,SAAmB,EAAE,KAAqD,EAAE;QAArDC,cAAF,MAAEA,aAAaC,gBAAf,MAAeA;IACrD,IAAIC,MAAM;IACV,IAAK,IAAIC,IAAI,GAAGA,IAAIJ,UAAUK,MAAM,EAAED,IAAK;QACzC,IAAIH,aAAa;YACfE,OAAO,MAAOF,CAAAA,cAAcD,SAAS,CAACI,EAAE,AAAD;QACzC,CAAC;QACD,IAAI,CAACH,eAAeC,eAAe;YACjCC,OAAO,MAAMH,SAAS,CAACI,EAAE;QAC3B,CAAC;IACH;IACA,OAAOD;AACT;AAEA,IAAMG,UAAU,iBAYI;8BAXlBC,OAAAA,kCAAQ,yCACRC,QAAAA,oCAAS,mBACTC,iBAAAA,SACAC,YAAAA,8BACAC,WAAAA,0CAAY,uBACZC,cAAAA,MACAC,oBAAAA,YACOC,aAAPC,OAAOD,aAAAA,iBAAa,CAAC,IAAdA,KACPE,eAAAA,OACAC,kBAAAA,UACGC;QAVHX;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAE;QACAC;QACAC;;IAGA,IAAME,OAAOC,KAAKC,GAAG,CAACd,OAAOC;IAE7B,IAAMc,eAAe7B,MAAM8B,UAAU,CAAC5B;IACtC,IAAM6B,WAAWzB,UACf;QAAC;QAAS,SAAa,OAALoB;QAAS,WAAgB,OAANZ;QAAU,WAAiB,OAAPC;QAAW,SAAW,OAAHE;KAAK,EACjFY;IAGF,IAAMP,QAAQ;QACZR,OAAAA;QACAC,QAAAA;OACGM;IAGL,qBACE,oBAACW;QACCC,eAAY;QACZC,SAAQ;OACJT;QACJP,WAAW,AAAC,GAAcA,OAAZa,UAAS,KAAa,OAAVb;QAC1BF,SAASA;QACTF,OAAOA;QACPC,QAAQA;QACRO,OAAOA;QACPa,KAAKf;QAEJG,uBAAS,oBAACA,eAAOA,sBAClB,oBAACa;QAAIC,WAAW,AAAC,IAAM,OAAHpB;QAAMK,OAAO;YAAEH,MAAM;YAAgBmB,OAAOnB;QAAK;OAClEK;AAIT;AAEA,OAAO,SAASe,SACdC,aAAqB,EACrBvB,EAAU,EACVD,OAAe,EACfyB,OAAe,EACf3B,KAAa,EACbC,MAAc,EACd2B,UAAoB,EACpBC,WAAoB,EACH;QAERC,YAAT,SAASA,YAAY;QACnB,IAAI,CAACC,WAAW;YACd1C,gBAAgB,IAAIF,cAAc;gBAAEwC,SAAAA;YAAQ;YAC5CI,YAAY,IAAI;QAClB,CAAC;IACH;IANA,IAAIA,YAAY,KAAK;IAQrB,IAAMC,OAAOzC,SAASmC;IACtB,IAAMO,OAAO,SAACC,OAAiB;QAC7B5C,0BAA0BwC,WAAW,EAAE;QAEvC,IAAIF,YAAY;YACd,IAAMO,oBAAoBN,cAAc,AAAC,iBAA4B,OAAZA,eAAgB,EAAE;YAE3EG,KAAK,oBAAoBG;QAC3B,CAAC;QAED,qBACE,oBAACpC,iDACKmC;YACJhC,SAASA;YACTC,IAAIA;YACJH,OAAOkC,MAAMlC,KAAK,KAAKoC,aAAa,CAACC,MAAMH,MAAMlC,KAAK,IAAI,CAACkC,MAAMlC,KAAK,GAAGA,KAAK;YAC9EC,QAAQiC,MAAMjC,MAAM,KAAKmC,aAAa,CAACC,MAAMH,MAAMjC,MAAM,IAAI,CAACiC,MAAMjC,MAAM,GAAGA,MAAM;;IAGzF;IAECgC,KAAaH,SAAS,GAAGA;IAC1BG,KAAKK,WAAW,GAAGZ;IAEnB,OAAOO;AACT,CAAC"}